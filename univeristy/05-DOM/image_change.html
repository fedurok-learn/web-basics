<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />

    <!-- jQuery library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container my-5">
        <div class="row">
            <img id="sheep-img" src="img/sheep.jpeg" class="mx-auto" width="60%">
        </div>

        <form onsubmit="return changeImgProperties()">
            <label for="width-field"><strong>Зміна розмірів</strong></label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="width-addon">Ширина (width)</span>
                </div>
                <input type="text" class="form-control" id="width-field" aria-describedby="width-addon">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="height-addon">Висота (height)</span>
                </div>
                <input type="text" class="form-control" id="height-field" aria-describedby="height-addon">
            </div>

            <label for="border-width-field"><strong>Зміна рамки</strong></label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="border-width-addon">Товщина рамки</span>
                </div>
                <input type="text" class="form-control" id="border-width-field" aria-describedby="border-width-addon">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="border-color-addon">Колір рамки</span>
                </div>
                <input type="text" class="form-control" id="border-color-field" aria-describedby="border-color-addon">
            </div>

            <label for="altext-field"><strong>Додатково</strong></label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="altext-addon">Альтернативний текст</span>
                </div>
                <input type="text" class="form-control" id="altext-field" aria-describedby="altext-addon">
            </div>

            <input type="submit" value="Застосувати параметри" class="btn btn-primary mt-3">
        </form>
    </div>

    <script>
        'use strict';

        const img = document.getElementById("sheep-img");
        const width = document.getElementById('width-field');
        const height = document.getElementById('height-field');
        const borderWidth = document.getElementById('border-width-field');
        const borderColor = document.getElementById('border-color-field');
        const altText = document.getElementById('altext-field');

        const allFields = [width, height, borderWidth, borderColor, altText];

        const resetColors = () => {
            allFields.forEach(
                (elem) => {
                    elem.style.borderColor = "";
                }
            )
        }

        const checkMandatoryFields = () => {
            var success = true;
            allFields.forEach(
                (elem) => {
                    if (!elem.value) {
                        elem.style.borderColor = "red";
                        success = false;
                    }
                }
            )

            return success;
        }

        const checkPositiveNumericFields = () => {
            const isNumeric = (val) => !isNaN(val);

            var success = true;
            [width, height, borderWidth].forEach(
                (elem) => {
                    if (!isNumeric(elem.value) || elem.value < 0) {
                        elem.style.borderColor = "red";
                        success = false;
                    }
                }
            )

            return success;
        }

        const checkTextFields = () => {
            const isLatin = (val) => /^[a-zA-Z]+$/.test(val);

            var success = true;
            [altText].forEach(
                (elem) => {
                    if (!isLatin(elem.value)) {
                        elem.style.borderColor = "red";
                        success = false;
                    }
                }
            )

            return success;
        }

        const changeImgProperties = () => {
            resetColors();
            var isMandatory = checkMandatoryFields();
            var isPositive = checkPositiveNumericFields();
            var isLatin = checkTextFields();

            if (isMandatory && isPositive && isLatin) {
                img.width = width.value;
                img.height = height.value;
                img.style.border = `${borderWidth.value}px solid ${borderColor.value}`;
                img.alt = altText.value;
            }

            return false; // so that form won't be sent
        };

    </script>
</body>


</html>